<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libcmdparse: Creating Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libcmdparse
   &#160;<span id="projectnumber">0.3.2-0</span>
   </div>
   <div id="projectbrief">command line option parsing with object-oriented interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Creating Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>option_t objects and their associated internal state are created by invoking the <code>option</code> member function of the <a class="el" href="classopt__parser.html" title="class controlling option declaration and parsing ">opt_parser</a> class, with the following prototype:</p>
<p><code>option_t option(const string&amp; spec, const string&amp; name = "")</code></p>
<h1>Structure of Information Stored About Options</h1>
<h2>Handles</h2>
<p>a handle is a way of referring to options both internally and in ARGV. handles are provided when the option is defined. commonly, handles begin with "-" or "--". in the option spec, handles may be listed by separating them with "|".</p>
<h2>Names</h2>
<p>an option's name is its unique identifier. all definitions of options with the same name must be compatible with each other. you can refer to options by their name when defining them, as the second argument to <code>option</code>, or in the public member functions of an opt_info object.</p>
<h2>The option_t struct</h2>
<p>option_t is a struct without private members that is used by <a class="el" href="classopt__parser.html" title="class controlling option declaration and parsing ">opt_parser</a> to store the information provided by <code>option</code>.</p>
<p>a simplified definition of the struct would look like this:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;struct option_t {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  string name;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  Mod_Prop mod;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  Num_Prop number;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  Assign_Prop assignment;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  Collect_Prop collection;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  Data_Prop data_type;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;}</div></div><!-- fragment --><p>each of the members shown except for name is described below.</p>
<h3>Mod_Prop</h3>
<p>describes modifier affecting an option</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;enum class Mod_Prop {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  NONE,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  SUB,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  BEFORE,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  AFTER,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  NOT_WITH</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div></div><!-- fragment --><h3>Num_Prop</h3>
<p>specifies the number of times an option may appear in command line arguments</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;enum class Num_Prop {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  ZERO_ONE,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  ZERO_MANY</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --><h3>Assign_Prop</h3>
<p>determines whether an option may take arguments and how its arguments are arranged with respect to it's handles</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;enum class Assign_Prop {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  NO_ASSIGN,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  EQ_REQUIRED,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  EQ_MAYBE,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  EQ_NEVER,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  STUCK</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div></div><!-- fragment --><h3>Collect_Prop</h3>
<p>an option's collection defines the manner in which arguments are determined</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;enum class Collect_Prop {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  SCALAR,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  LIST</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --><h3>Data_Prop</h3>
<p>defines the type of data of an option's argument(s)</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;enum class Data_Prop {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  STRING,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  INTEGER,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  FLOAT</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;}</div></div><!-- fragment --><h2>What Is an Option Spec?</h2>
<p>the option spec is the first argument to <code>option</code>, which is a condensed string representation of an option_t object and the handles associated with the option.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;option_spec&gt; := &lt;mod&gt;&lt;handle_list&gt;&lt;number&gt;&lt;arg_spec&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;mod&gt;         := &#39;[&#39;&lt;mod_expr&gt;&#39;]&#39;|&lt;nil&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;&lt;mod_expr&gt;    := &lt;mod_setting&gt;|&lt;mod_fn&gt;&lt;mod_arg&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;&lt;mod_setting&gt; := &#39;&amp;&#39;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;&lt;mod_fn&gt;      := &#39;&lt;&#39;|&#39;&gt;&#39;|&#39;!&#39;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;&lt;mod_arg&gt;     := &lt;option_name&gt;|&#39;*&#39;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;&lt;handle_list&gt; := &lt;handle&gt;|&lt;handle&gt;&#39;|&#39;&lt;handle_list&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;&lt;handle&gt;      := &lt;prefix&gt;&lt;handle_name&gt;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;&lt;prefix&gt;      := &#39;-&#39;&lt;minus&gt;|&#39;+&#39;&lt;plus&gt;|&#39;.&#39;|&#39;:&#39;|&#39;/&#39;|&lt;nil&gt;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;&lt;minus&gt;       := &#39;-&#39;|&lt;nil&gt;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;&lt;plus&gt;        := &#39;+&#39;|&lt;nil&gt;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;&lt;handle_name&gt; := &lt;option_name&gt;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;&lt;number&gt;      := &#39;*&#39;|&#39;?&#39;|&lt;nil&gt;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;&lt;arg_spec&gt;    := &lt;eq&gt;&lt;arg_type&gt;|&lt;eq&gt;&lt;arglist&gt;|&lt;arglist&gt;|&lt;nil&gt;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;&lt;eq&gt;          := &#39;=&#39;&lt;eq_type&gt;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;&lt;eq_type&gt;     := &#39;?&#39;|&#39;!&#39;|&#39;|&#39;|&lt;nil&gt;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;&lt;arg_type&gt;    := &#39;s&#39;|&#39;i&#39;|&#39;f&#39;|&lt;nil&gt;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;&lt;arglist&gt;     := &#39;[&#39;&lt;arg_type&gt;&#39;]&#39;</div></div><!-- fragment --><h1>Examples</h1>
<p>the following example calls to <code>option</code> demonstrate how to create common types of options. in the examples, assume <code>p</code> is an object of type <code><a class="el" href="classopt__parser.html" title="class controlling option declaration and parsing ">opt_parser</a></code>.</p>
<h2>Set the Option Name Explicitly or Implicitly</h2>
<p>an option's name can be set with the second argument to <code>option</code> (if it is not the empty string). otherwise it is deduced from the last handle in the handle list, minus the prefix.</p>
<p><code>p.option("--handle", "name")</code></p>
<p>the above option has the name "name".</p>
<p><code>p.option("--handle")</code></p>
<p>here the name is deduced to be "handle".</p>
<h2>Multiple Handles to an Option</h2>
<p>you can define multiple handles which target the same option. this can be achieved in a single option spec or across multiple specs. note that in the latter case, the options deduced from the separate specs must be compatible.</p>
<p><code>p.option("-a|-b", "name")</code></p>
<p>this call creates an option with name "name" and the handles "-a" and "-b".</p>
<p><code>p.option("-c", "name")</code></p>
<p>this call adds a third handle "-c" to the same option, using the name "name" to connect them.</p>
<h2>Multiple Types of Prefixes</h2>
<p>libcmdparse supports several types of handle prefixes, including the common "-", "--", and "+". you can define an option with handles using every type of prefix or no prefix at all.</p>
<p><code>p.option("-h|--h|.h|:h|+h|++h|/h|h")</code></p>
<p>this example creates an option with handles using every prefix and also no prefix.</p>
<h2>Simple Flags</h2>
<p><code>p.option("--has-option")</code></p>
<p>this creates an option with no arguments that has the handle "--has-option". implicitly, it is allowed to occur only once. you may state this explicitly with</p>
<p><code>p.option("--has-option?")</code></p>
<p>or allow it to occur any number of times with</p>
<p><code>p.option("--has-option*")</code></p>
<h2>Options with Arguments</h2>
<p>options may take string, integer, or floating point arguments, depending on how they are declared. the default argument type is string.</p>
<p><code>p.option("-age=i")</code></p>
<p>when the handle "-age" is found in parsing, optparser will enforce three conditions:</p><ol type="1">
<li>an '=' must be used to separate the handle from its argument</li>
<li>the handle must have an argument</li>
<li>the argument must match an integer</li>
</ol>
<p>an option that splits arguments on the comma may be specified as</p>
<p><code>p.option("-W=|[s]")</code></p>
<p>this option takes string arguments which are stuck to the handle, like so</p>
<p>"-Wsome,any,none"</p>
<p>which receives the single argument "some,any,none" and splits it into "some", "any", and "none". </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
